var hosticDOM=(()=>{var B=Object.defineProperty,Ue=Object.prototype.hasOwnProperty,P=Object.assign,x=(e,t)=>()=>(t||(t={exports:{}},e(t.exports,t)),t.exports),ce=e=>B(e,"__esModule",{value:!0}),Be=(e,t)=>{ce(e);for(var r in t)B(e,r,{get:t[r],enumerable:!0})},Ve=(e,t)=>{if(ce(e),typeof t=="object"||typeof t=="function")for(let r in t)!Ue.call(e,r)&&r!=="default"&&B(e,r,{get:()=>t[r],enumerable:!0});return e},We=e=>e&&e.__esModule?e:Ve(B({},"default",{value:e,enumerable:!0}),e);var Q=x(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.default=Xe;var ue=/^[^\\]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,ze=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,Ge=/^\s*((?:\\.|[\w\u00b0-\uFFFF-])+)\s*(?:(\S?)=\s*(?:(['"])([^]*?)\3|(#?(?:\\.|[\w\u00b0-\uFFFF-])*)|)|)\s*(i)?\]/,Ye={undefined:"exists","":"equals","~":"element","^":"start",$:"end","*":"any","!":"not","|":"hyphen"},he={">":"child","<":"parent","~":"sibling","+":"adjacent"},de={"#":["id","equals"],".":["class","element"]},Je=new Set(["has","not","matches"]),Qe=new Set(["contains","icontains"]),pe=new Set(['"',"'"]);function Ze(e,t,r){var n=parseInt(t,16)-65536;return n!==n||r?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)}function V(e){return e.replace(ze,Ze)}function fe(e){return e===" "||e===`
`||e==="	"||e==="\f"||e==="\r"}function Xe(e,t){var r=[];if(e=me(r,""+e,t),e!=="")throw new Error("Unmatched selector: "+e);return r}function me(e,t,r){var n=[],i=!1;function s(){var _=t.match(ue);if(!_)throw new Error("Expected name, found "+t);var j=_[0];return t=t.substr(j.length),V(j)}function a(_){for(;fe(t.charAt(_));)_++;t=t.substr(_)}function o(_){for(var j=0;t.charAt(--_)==="\\";)j++;return(j&1)===1}for(a(0);t!=="";){var l=t.charAt(0);if(fe(l))i=!0,a(1);else if(l in he)n.push({type:he[l]}),i=!1,a(1);else if(l===","){if(n.length===0)throw new Error("Empty sub-selector");e.push(n),n=[],i=!1,a(1)}else if(i&&(n.length>0&&n.push({type:"descendant"}),i=!1),l==="*")t=t.substr(1),n.push({type:"universal"});else if(l in de){var h=de[l],b=h[0],A=h[1];t=t.substr(1),n.push({type:"attribute",name:b,action:A,value:s(),ignoreCase:!1})}else if(l==="["){t=t.substr(1);var c=t.match(Ge);if(!c)throw new Error("Malformed attribute selector: "+t);t=t.substr(c[0].length);var p=V(c[1]);(!r||("lowerCaseAttributeNames"in r?r.lowerCaseAttributeNames:!r.xmlMode))&&(p=p.toLowerCase()),n.push({type:"attribute",name:p,action:Ye[c[2]],value:V(c[4]||c[5]||""),ignoreCase:!!c[6]})}else if(l===":"){if(t.charAt(1)===":"){t=t.substr(2),n.push({type:"pseudo-element",name:s().toLowerCase()});continue}t=t.substr(1);var f=s().toLowerCase(),c=null;if(t.charAt(0)==="(")if(Je.has(f)){var g=t.charAt(1),Y=pe.has(g);if(t=t.substr(Y?2:1),c=[],t=me(c,t,r),Y){if(t.charAt(0)!==g)throw new Error("Unmatched quotes in :"+f);t=t.substr(1)}if(t.charAt(0)!==")")throw new Error("Missing closing parenthesis in :"+f+" ("+t+")");t=t.substr(1)}else{for(var N=1,v=1;v>0&&N<t.length;N++)t.charAt(N)==="("&&!o(N)?v++:t.charAt(N)===")"&&!o(N)&&v--;if(v)throw new Error("Parenthesis not matched");if(c=t.substr(1,N-2),t=t.substr(N),Qe.has(f)){var g=c.charAt(0);g===c.slice(-1)&&pe.has(g)&&(c=c.slice(1,-1)),c=V(c)}}n.push({type:"pseudo",name:f,data:c})}else if(ue.test(t)){var L=s();(!r||("lowerCaseTags"in r?r.lowerCaseTags:!r.xmlMode))&&(L=L.toLowerCase()),n.push({type:"tag",name:L})}else return n.length&&n[n.length-1].type==="descendant"&&n.pop(),ge(e,n),t}return ge(e,n),t}function ge(e,t){if(e.length>0&&t.length===0)throw new Error("Empty sub-selector");e.push(t)}});var ye=x(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});var Ke={equals:"",element:"~",start:"^",end:"$",any:"*",not:"!",hyphen:"|"};function Ne(e){return e.map(et).join(", ")}Z.default=Ne;function et(e){return e.map(tt).join("")}function tt(e){switch(e.type){case"child":return" > ";case"parent":return" < ";case"sibling":return" ~ ";case"adjacent":return" + ";case"descendant":return" ";case"universal":return"*";case"tag":return y(e.name);case"pseudo-element":return"::"+y(e.name);case"pseudo":return e.data===null?":"+y(e.name):typeof e.data=="string"?":"+y(e.name)+"("+e.data+")":":"+y(e.name)+"("+Ne(e.data)+")";case"attribute":return e.action==="exists"?"["+y(e.name)+"]":e.name==="id"&&e.action==="equals"&&!e.ignoreCase?"#"+y(e.value):e.name==="class"&&e.action==="element"&&!e.ignoreCase?"."+y(e.value):"["+y(e.name)+Ke[e.action]+"='"+y(e.value)+"'"+(e.ignoreCase?"i":"")+"]";default:throw new Error("Unknown type")}}function y(e){return e}});var Ee=x(T=>{"use strict";var rt=T&&T.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),nt=T&&T.__exportStar||function(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&rt(t,e,r)};Object.defineProperty(T,"__esModule",{value:!0});nt(Q(),T);var st=Q();Object.defineProperty(T,"parse",{enumerable:!0,get:function(){return st.default}});var it=ye();Object.defineProperty(T,"stringify",{enumerable:!0,get:function(){return it.default}})});var Te=x((It,be)=>{const at=/([^=\s]+)(\s*=\s*(("([^"]*)")|('([^']*)')|[^>\s]+))?/gm,ot=/^<\/([^>\s]+)[^>]*>/m,lt=/^<([^>\s\/]+)((\s+[^=>\s]+(\s*=\s*(("[^"]*")|('[^']*')|[^>\s]+))?)*)\s*\/?\s*>/m,ct=/\s*\/\s*>\s*$/m,W=e=>{throw new Error(`Must implement the method ${e||""}`)};class O{constructor(e){e=e||{},e.scanner&&(this.scanner=e.scanner,e.scanner=null),this.options=Object.assign({},O.defaults,e)}parse(e){let t=!1,r,n,i;for(;e.length;)e.substring(0,4)==="<!--"?(r=e.indexOf("-->"),r!==-1?(this.scanner.comment(e.substring(4,r)),e=e.substring(r+3),t=!1):t=!0):e.substring(0,2)==="</"?(n=this.endTagRe.exec(e),n?(e=RegExp.rightContext,t=!1,this.parseEndTag(RegExp.lastMatch,n[1])):t=!0):e.charAt(0)==="<"&&(n=this.startTagRe.exec(e),n?(e=RegExp.rightContext,t=!1,this.parseStartTag(RegExp.lastMatch,n[1],n)):t=!0),t&&(r=e.indexOf("<"),r===0&&(r=e.substring(1).indexOf("<")),r===-1?(i=e,e=""):(i=e.substring(0,r),e=e.substring(r)),(!this.options.ignoreWhitespaceText||!/^\s*$/.test(i))&&this.scanner.characters(i)),t=!0,n=null}parseStartTag(e,t,r){const n=ct.test(e);let i=r[2];n&&(i=i.replace(/\s*\/\s*$/,""));const s=this.parseAttributes(t,i);this.scanner.startElement(t,s,n,r[0])}parseEndTag(e,t){this.scanner.endElement(t)}parseAttributes(e,t){const r={};return t.replace(this.attrRe,(n,i,s,a,o,l,h,b)=>{r[i]=b||l||a||!0}),r}}O.defaults={ignoreWhitespaceText:!1};O.prototype.attrRe=at;O.prototype.endTagRe=ot;O.prototype.startTagRe=lt;O.prototype.scanner={startElement(){W("startElement")},endElement(){W("endElement")},characters(){W("characters")},comment(){W("comment")}};be.exports=O});var Ce=x((H,_e)=>{const K=1,ut=3,ht=8,dt=9,xe=10;class ee{constructor({tagName:e,nodeType:t,attrs:r,textContent:n,parentNode:i,childNodes:s}){this.tagName=e,this.nodeType=t,this.textContent=n,this.parentNode=i,this.attrs=r,this.childNodes=s||[],t===K&&(r.id&&(this.id=r.id),r.class&&(this.className=r.class))}appendChild(e){e&&(e.parentNode=this,this.childNodes.push(e))}insertAfter(e,t){if(!t)return this.appendChild(e);this.childNodes.some((r,n)=>{if(r===t)return e.parentNode=this,this.childNodes.splice(n,0,e),!0})}insertBefore(e,t){if(!t)return this.appendChild(e);this.childNodes.some((r,n)=>{if(r===t)return e.parentNode=this,n===0?this.childNodes.unshift(e):this.childNodes.splice(n-1,0,e),!0})}toJSON(){const e={tagName:this.tagName,nodeType:this.nodeType};return this.childNodes.length&&(e.childNodes=this.childNodes),this.textContent&&(e.textContent=this.textContent),this.attrs&&(e.attrs=this.attrs),this.id&&(e.id=this.id),this.className&&(e.className=this.className),e}getElementsByTagName(e){}getElementsByClassName(e){}}H=_e.exports=ee;H.NODE_TYPE={ELEMENT_NODE:K,TEXT_NODE:ut,COMMENT_NODE:ht,DOCUMENT_NODE:dt,DOCUMENT_TYPE_NODE:xe};class pt extends ee{constructor(e){super(e);this.id=void 0,this.nodeType=xe,this.systemId=e.systemId||"",this.publicId=e.publicId||"",this.name=e.name||"html"}toJSON(){return{tagName:this.tagName,nodeType:this.nodeType,publicId:this.publicId,systemId:this.systemId,name:this.name}}}class ft extends ee{getElementById(e){if(!e)return null;return t(this.childNodes);function t(r){let n;return r.some(i=>i.nodeType!==K?!1:i.id===e?n=i:n=t(i.childNodes)),n}}}H.DoctypeNode=pt;H.DocumentNode=ft});var ve=x((kt,we)=>{const I=Ce(),{ELEMENT_NODE:mt,TEXT_NODE:gt,COMMENT_NODE:Nt,DOCUMENT_NODE:yt,DOCUMENT_TYPE_NODE:Et}=I.NODE_TYPE,{DoctypeNode:bt,DocumentNode:Tt}=I,_t=/^\s*<!doctype\s+(html)(\s+public(\s+('[^']+'|"[^"]+"))?(\s+('[^']+'|"[^"]+"))?)?\s*/i,C={doctype(e,t,r,n,i){const s=e.path[e.path.length-1],a=_t.exec(i)||[],o=new bt({tagName:"doctype",nodeType:Et,parentNode:s,name:a[1],publicId:a[4]&&a[4].substring(1,a[4].length-1),systemId:a[6]&&a[6].substring(1,a[6].length-1)});s.appendChild(o)},_default(e,t,r,n,i){const s=e.path[e.path.length-1],a=new I({tagName:t,nodeType:mt,attrs:r,parentNode:s});s.appendChild(a),n||e.path.push(a)},_selfCloseTag(e,t,r,n,i){C._default(e,t,r,!0,i)}};C["!doctype"]=C.doctype;["area","base","link","br","hr","col","command","embed","img","input","keygen","meta","param","source","track","wbr"].forEach(e=>{C[e]=C._selfCloseTag});class xt{constructor(){this.reset()}reset(){this.rootNode=new Tt({tagName:"document",nodeType:yt}),this.path=[this.rootNode]}getRootNode(){return this.rootNode}startElement(e,t,r,n){return e=e.toLowerCase(),C[e]?C[e](this,e,t,r,n):C._default(this,e,t,r,n)}endElement(e){this.path.pop()}characters(e){if(/^\s*$/.test(e))return;const t=this.path[this.path.length-1],r=new I({tagName:"text",nodeType:gt,textContent:e,parentNode:t});t.appendChild(r)}comment(e){const t=this.path[this.path.length-1],r=new I({tagName:"comment",nodeType:Nt,textContent:e,parentNode:t});t.appendChild(r)}}we.exports=xt});var Se=x((X,Oe)=>{const De=Te(),Ae=ve();class Ct extends De{constructor(e){e=e||{},e.scanner||(e.scanner=new Ae),super(e)}parse(e){super.parse(e);const t=this.scanner.getRootNode();return this.scanner.reset(),t}}X=Oe.exports=Ct;X.RawHtmlParser=De;X.HtmlScanner=Ae});var Pe=x(wt=>{Be(wt,{CDATA:()=>re,VDocument:()=>F,VDocumentFragment:()=>w,VElement:()=>E,VHTMLDocument:()=>ne,VNode:()=>u,VNodeQuery:()=>z,VTextNode:()=>d,createDocument:()=>se,createHTMLDocument:()=>Me,document:()=>q,escapeHTML:()=>S,h:()=>Le,hArgumentParser:()=>D,hFactory:()=>G,html:()=>m,parseHTML:()=>R,removeBodyContainer:()=>je,tidyDOM:()=>te,unescapeHTML:()=>M,vdom:()=>k,xml:()=>$})});function vt(e,t,r,n){if(typeof t=="function")return t.call(null,{props:P(P({},r),{children:n}),attrs:r,children:n,h:e.h,context:e});{let i;if(t?t.toLowerCase()==="fragment"?i=e.document.createDocumentFragment():i=e.document.createElement(t):i=e.document.createElement("div"),r)for(let[s,a]of Object.entries(r))s&&typeof s=="string"&&(s=s.toLowerCase()),s==="classname"?i.className=a:s==="on"?Object.entries(a).forEach(([o,l])=>{i.setAttribute("on"+o,l)}):a!==!1&&a!=null&&(a===!0?i.setAttribute(s,s):i.setAttribute(s,a.toString()));if(n)for(const s of n){let a=Array.isArray(s)?[...s]:[s];for(let o of a)o&&(o!==!1&&o!=null&&(typeof o!="object"?i.appendChild(e.document.createTextNode(o.toString())):i.appendChild(o)))}return i}}function D(e,t,...r){return typeof e=="object"&&(e="fragment",r=e.children,t=e.attrs),Array.isArray(t)?(r=t,t={}):t?t.attrs&&(t=P(P({},t.attrs),t),delete t.attrs):t={},{tag:e,attrs:t,children:r.flat(Infinity)}}function G(e){return e.h=function(r,n,...i){let{tag:s,attrs:a,children:o}=D(r,n,i);return vt(e,s,a,o)},e.h}function S(e){return e&&e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")}function M(e){return e&&e.replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&quot;/gi,'"').replace(/&apos;/gi,"'").replace(/&amp;/gi,"&")}const ie=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr","command"];let U=[];function re(e){return e="<![CDATA["+e+"]]>",U.push(e),e}function ae(e,t,r,n){const i=n&&n.length>0;let s="";if(t=t.replace(/__/g,":"),t!=="noop"){t!=="cdata"?s+=`<${t}`:s+="<![CDATA[";for(let a in r)if(a&&r.hasOwnProperty(a)){let o=r[a];if(a==="html")continue;a.toLowerCase()==="classname"&&(a="class"),a=a.replace(/__/g,":"),o===!0?s+=` ${a}="${a}"`:a==="style"&&typeof o=="object"?s+=` ${a}="${Object.keys(o).filter(l=>o[l]!=null).map(l=>{let h=o[l];return h=typeof h=="number"?h+"px":h,`${l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${h}`}).join(";")}"`:o!==!1&&o!=null&&(s+=` ${a}="${S(o.toString())}"`)}if(t!=="cdata"){if(e&&!i)return s+=" />",U.push(s),s;s+=">"}if(!e&&ie.includes(t))return U.push(s),s}if(i){for(let a of n)if(a!=null&&a!==!1){Array.isArray(a)||(a=[a]);for(let o of a)U.indexOf(o)!==-1||t==="script"||t==="style"?s+=o:s+=S(o.toString())}}return r.html&&(s+=r.html),t!=="noop"&&(t!=="cdata"?s+=`</${t}>`:s+="]]>"),U.push(s),s}function m(e,t,...r){let{tag:n,attrs:i,children:s}=D(e,t,r);return ae(!1,n,i,s)}m.firstLine="<!DOCTYPE html>";m.html=!0;const He=We(Ee());let Ie={};function Ot(e){let t=Ie[e];return t==null&&(t=He.parse(e),Ie[e]=t),t}function ke(e,t,{debug:r=!1}={}){for(let i of Ot(e)){r&&(console.log("Selector:",e),console.log("Rules:",i),console.log("Element:",t));function n(s,a){var l,h,b;let o=!1;for(let A of a){const{type:c,name:p,action:f,value:g,ignoreCase:Y=!0,data:N}=A;if(c==="attribute")f==="equals"?(o=s.getAttribute(p)===g,r&&console.log("Attribute equals",o)):f==="start"?(o=(l=s.getAttribute(p))==null?void 0:l.startsWith(g),r&&console.log("Attribute start",o)):f==="end"?(o=(h=s.getAttribute(p))==null?void 0:h.endsWith(g),r&&console.log("Attribute start",o)):f==="element"?p==="class"?(o=s.classList.contains(g),r&&console.log("Attribute class",o)):(o=(b=s.getAttribute(p))==null?void 0:b.includes(g),r&&console.log("Attribute element",o)):f==="exists"?(o=s.hasAttribute(p),r&&console.log("Attribute exists",o)):console.warn("Unknown CSS selector action",f);else if(c==="tag")o=s.tagName===p.toUpperCase(),r&&console.log("Is tag",o);else if(c==="universal")o=!0,r&&console.log("Is universal",o);else if(c==="pseudo"){if(p==="not"){let v=!0;N.forEach(L=>{n(s,L)||(v=!1)}),o=!v}r&&console.log("Is :not",o)}else console.warn("Unknown CSS selector type",c,e,a);if(!o)break}return o}if(n(t,i))return!0}return!1}const Dt=Symbol.for("nodejs.util.inspect.custom");let Re={fontWeight:"bold"},$e={fontStyle:"italic"},Fe={backgroundColor:"rgb(255, 250, 165)"},qe={textDecorations:"underline"},oe={textDecorations:"line-through"},At={b:Re,strong:Re,em:$e,i:$e,mark:Fe,u:qe,a:qe,s:oe,del:oe,ins:Fe,strike:oe};class u{get nodeType(){return console.error("Subclasses should define nodeType!"),0}get nodeName(){return console.error("Subclasses should define nodeName!"),""}get nodeValue(){return null}constructor(){this._parentNode=null,this._childNodes=[]}cloneNode(e=!1){let t=new this.constructor;return e&&(t._childNodes=this._childNodes.map(r=>r.cloneNode(!0)),t._fixChildNodesParent()),t}_fixChildNodesParent(){this._childNodes.forEach(e=>e._parentNode=this)}insertBefore(e,t=null){if(e!==t){let r=t?this._childNodes.indexOf(t):0;r<0&&(r=0),this._childNodes.splice(r,0,e),this._fixChildNodesParent()}}appendChild(e){if(e===this){console.warn("Cannot appendChild to self");return}if(e instanceof F&&console.warn("No defined how to append a document to a node!",e),e instanceof w)for(let t of[...e._childNodes])this.appendChild(t);else if(Array.isArray(e))for(let t of[...e])this.appendChild(t);else if(e instanceof u)e.remove(),this._childNodes.push(e);else try{const t=typeof e=="string"?e:JSON.stringify(e,null,2);this._childNodes.push(new d(t))}catch(t){console.error(`The data ${e} to be added to ${this.render()} is problematic: ${t}`)}this._fixChildNodesParent()}removeChild(e){let t=this._childNodes.indexOf(e);t>=0&&(e._parentNode=null,this._childNodes.splice(t,1),this._fixChildNodesParent())}remove(){var e;return(e=this==null?void 0:this.parentNode)==null||e.removeChild(this),this}replaceChildren(...e){this._childNodes=e.map(t=>typeof t=="string"?new d(t):t.remove()),this._fixChildNodesParent()}replaceWith(...e){let t=this._parentNode;if(t){let r=this._indexInParent();r>=0&&(e=e.map(n=>typeof n=="string"?new d(n):n.remove()),t._childNodes.splice(r,1,...e),this._parentNode=null,t._fixChildNodesParent())}}_indexInParent(){return this._parentNode?this._parentNode.childNodes.indexOf(this):-1}get parentNode(){return this._parentNode}get childNodes(){return this._childNodes||[]}get children(){return this._childNodes||[]}get firstChild(){return this._childNodes[0]}get lastChild(){return this._childNodes[this._childNodes.length-1]}get nextSibling(){let e=this._indexInParent();return e!=null&&this.parentNode.childNodes[e+1]||null}get previousSibling(){let e=this._indexInParent();return e>0&&this.parentNode.childNodes[e-1]||null}flatten({condition:e=t=>t instanceof E}={}){let t=[];e(this)&&t.push(this);for(let r of this._childNodes)t.push(...r.flatten({condition:e}));return t}render(){return""}get textContent(){return this._childNodes.map(e=>e.textContent).join("")}set textContent(e){this._childNodes=[],e&&this.appendChild(new d(e.toString()))}contains(e){return e===this?!0:this._childNodes.some(t=>t.contains(e))}get ownerDocument(){var e;return this.nodeType===u.DOCUMENT_NODE||this.nodeType===u.DOCUMENT_FRAGMENT_NODE?this:(e=this==null?void 0:this._parentNode)==null?void 0:e.ownerDocument}toString(){return`${this.nodeName}`}[Dt](){return`${this.constructor.name} "${this.render()}"`}}u.ELEMENT_NODE=1,u.TEXT_NODE=3,u.CDATA_SECTION_NODE=4,u.PROCESSING_INSTRUCTION_NODE=7,u.COMMENT_NODE=8,u.DOCUMENT_NODE=9,u.DOCUMENT_TYPE_NODE=10,u.DOCUMENT_FRAGMENT_NODE=11;class d extends u{get nodeType(){return u.TEXT_NODE}get nodeName(){return"#text"}get nodeValue(){return this._text||""}get textContent(){return this.nodeValue}constructor(e=""){super();this._text=e}render(){return this._text}cloneNode(e=!1){let t=super.cloneNode(e);return t._text=this._text,t}}class z extends u{getElementById(e){return this.flatten().find(t=>t._attributes.id===e)}getElementsByClassName(e){return this.flatten().filter(t=>t.classList.contains(e))}matches(e){return ke(e,this)}querySelectorAll(e){return this.flatten().filter(t=>t.matches(e))}querySelector(e){return this.flatten().find(t=>t.matches(e))}parent(e){var t;return this.matches(e)?this:this.parentNode==null?null:(t=this.parentNode)==null?void 0:t.parent(e)}handle(e,t){let r=0;for(let n of this.querySelectorAll(e))t(n,r++)}}class E extends z{get nodeType(){return u.ELEMENT_NODE}get nodeName(){return this._nodeName}constructor(e="div",t={}){super();this._nodeName=(e||"").toUpperCase(),this._attributes=t||{},this._styles=null}cloneNode(e=!1){let t=super.cloneNode(e);return t._nodeName=this._nodeName,t._attributes=Object.assign({},this._attributes),t}get attributes(){return this._attributes}setAttribute(e,t){this._attributes[e]=t,this._styles=null}getAttribute(e){return this._attributes[e]}removeAttribute(e){delete this._attributes[e]}hasAttribute(e){return this._attributes[e]!=null}get style(){if(this._styles==null){let e=Object.assign({},At[this.tagName.toLowerCase()]||{}),t=this.getAttribute("style");if(t){let r,n=/\s*([\w-]+)\s*:\s*([^;]+)/g;for(;r=n.exec(t);){let i=r[1],s=r[2].trim();e[i]=s;let a=o=>o.replace(/[A-Z]/g,"-$&").toLowerCase();e[a]=s}}this._styles=e}return this._styles}get tagName(){return this._nodeName}get id(){return this._attributes.id}set id(e){this._attributes.id=e}get src(){return this._attributes.src}set src(e){this._attributes.src=e}getElementsByTagName(e){e=e.toUpperCase();let t=this.flatten();return e!=="*"?t.filter(r=>r.tagName===e):t}get innerHTML(){return this._childNodes.map(e=>e.render(m)).join("")}set innerHTML(e){if(this.setInnerHTML)this.setInnerHTML(e);else throw"set innerHTML not implemented"}get outerHTML(){return this.render(m)}get className(){return this._attributes.class||""}set className(e){Array.isArray(e)?e=e.filter(t=>!!t).join(" "):typeof e=="object"&&(e=Object.entries(e).filter(([t,r])=>!!r).map(([t,r])=>t).join(" ")),this._attributes.class=e}get classList(){let e=this,t=(this.className||"").trim().split(/\s+/g)||[];return{contains(r){return t.includes(r)},add(r){t.includes(r)||(t.push(r),e.className=t)},remove(r){let n=t.indexOf(r);n>=0&&(t.splice(n,1),e.className=t)}}}render(e=m){return e(this.tagName.toLowerCase(),this.attributes,this.childNodes.map(t=>t.render(e)))}}class w extends z{get nodeType(){return u.DOCUMENT_FRAGMENT_NODE}get nodeName(){return"#document-fragment"}render(e=m){return this._childNodes.map(t=>t.render(e)||[]).join("")}get innerHTML(){return this._childNodes.map(e=>e.render(m)).join("")}createElement(e,t={}){return new E(e,t)}createDocumentFragment(){return new w}createTextNode(e){return new d(e)}}class F extends w{get nodeType(){return u.DOCUMENT_NODE}get nodeName(){return"#document"}get documentElement(){return this.firstChild}}class ne extends F{constructor(){super();let e=new E("html"),t=new E("body"),r=new E("head"),n=new E("title");e.appendChild(r),r.appendChild(n),e.appendChild(t),this.appendChild(e)}get body(){return this.querySelector("body")}get title(){var e;return(e=this.querySelector("title"))==null?void 0:e.textContent}set title(e){this.querySelector("title").textContent=e}get head(){return this.querySelector("head")}render(e=m){let t=super.render(e);return e.firstLine&&(t=e.firstLine+`
`+t),t}}function se(){return new F}function Me(){return new ne}let q=se(),Le=G({document:q});const St=Se(),Mt=St.RawHtmlParser;function k(e=null){return e instanceof u?e:(e instanceof Buffer&&(e=e.toString("utf-8")),typeof e=="string"?R(e):new w)}function R(e){let t=new w,r=[t],n=new Mt({scanner:{startElement(i,s,a){for(let h in s)s.hasOwnProperty(h)&&(s[h]=M(s[h]));let o=r[r.length-1];const l=q.createElement(i,s);o.appendChild(l),ie.includes(i.toLowerCase())||a||r.push(l)},endElement(i){r.pop()},characters(i){var a;i=M(i);let s=r[r.length-1];((a=s==null?void 0:s.lastChild)==null?void 0:a.nodeType)===u.TEXT_NODE?s.lastChild._text+=i:s.appendChild(new d(i))},comment(i){}}});return n.parse(e),t}E.prototype.setInnerHTML=function(e){let t=R(e);this._childNodes=t._childNodes,this._fixChildNodesParent()};function je(e){let t=e.querySelector("head"),r=e.querySelector("body");return(r||t)&&(e=k(),t&&e.appendChild(t.childNodes),r&&e.appendChild(r.children)),e}function le(e){let t="";for(;e.parentNode;)t+="  ",e=e.parentNode;return t.substr(2)}function te(e,t){let r="meta,link,script,p,h1,h2,h3,h4,h5,h6,blockquote,div,ul,ol,li,article,section,footer,head,body,title,nav,section,article,hr,form";e.handle(r,n=>{var o,l,h,b,A,c;let i=n;for(;i;){if(["PRE","CODE","SCRIPT","STYLE","TT"].includes(i.tagName))return;i=i.parentNode}let s=n.previousSibling;(!s||s.nodeType!==u.TEXT_NODE||!((o=s.nodeValue)==null?void 0:o.endsWith(`
`)))&&((l=n.parentNode)==null||l.insertBefore(new d(`
`),n)),(h=n.parentNode)==null||h.insertBefore(new d(le(n)),n);let a=n.nextSibling;if((!a||a.nodeType!==u.TEXT_NODE||!((b=a.nodeValue)==null?void 0:b.startsWith(`
`)))&&(a?(A=n.parentNode)==null||A.insertBefore(new d(`
`),a):(c=n.parentNode)==null||c.appendChild(new d(`
`))),n.childNodes.length){let p=n.firstChild;p.nodeType===u.TEXT_NODE&&n.insertBefore(new d(`
`+le(n)+"  ")),n.appendChild(new d(`
`+le(n)))}})}function $(e,t,...r){let{tag:n,attrs:i,children:s}=D(e,t,r);return ae(!0,n,i,s)}$.firstLine='<?xml version="1.0" encoding="utf-8"?>';$.xml=!0;return Pe();})();
